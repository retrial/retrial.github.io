"use strict";(self.webpackChunkexchange_admin=self.webpackChunkexchange_admin||[]).push([[995],{6530:(e,a,s)=>{s.r(a),s.d(a,{default:()=>u});var l=s(2791),t=s(9993),o=s(4933),n=s(7207),r=s(6795),i=s(1616);s.p;var c=s(9434),d=s(9832),m=s(3329);function p(e){let{prepareRoles:a,setDefaultSelectValue:s,roles:l,handlerShowPopup:n,dispatch:i}=e,c={roleName:"",status:""};const p=(e,a)=>{c[e]=a};return[{Header:"User Id",accessor:"publicId"},{Header:"User Name",accessor:"fullName"},{Header:"Email",accessor:"email"},{Header:"Role",id:"Role",Cell:e=>(0,m.jsx)(t.ZP,{defaultValue:s(e.original.role.name),options:a(l),className:"react-select-container",classNamePrefix:"react-select",onChange:e=>p("roleName",e.value),name:"purpose",placeholder:"",styles:o.B})},{Header:"Status",id:"Status",Cell:e=>(0,m.jsx)(t.ZP,{defaultValue:s(e.original.status.name),options:(0,r.bC)([{id:1,name:"active"},{id:2,name:"blocked"}]),className:"react-select-container",classNamePrefix:"react-select",onChange:e=>p("status",e.value),name:"purpose",placeholder:"",styles:o.B})},{Header:"Last Login",accessor:"lastSeenAt"},{Header:"Delete Admin",sortable:!1,Cell:e=>(0,m.jsx)("span",{onClick:()=>n(e.original.id,"deleteAdmin"),className:"adminTableActions",children:(0,m.jsx)("img",{className:"resetPass-icon",src:"/img/svg/reject.svg",title:"Delete admin",alt:"Delete admin"})})},{Header:"Reset Password",sortable:!1,Cell:e=>(0,m.jsx)("span",{onClick:()=>n(e.original.email,"resetPass"),className:"adminTableActions",children:(0,m.jsx)("img",{className:"resetPass-icon",src:"/img/svg/reset_pass.svg",title:"Reset password",alt:"Reset password"})})},{Header:"Save",sortable:!1,Cell:e=>(0,m.jsx)("span",{onClick:()=>{c.roleName||(c.roleName=e.original.role.name),c.status||(c.status=e.original.status.id),i((0,d.aq)(e.original.id))},className:"adminTableActions",children:(0,m.jsx)("i",{className:"far fa-save"})})}]}const u=()=>{const e=(0,c.I0)(),a=(0,c.v9)((e=>e.options.roles)),s=(0,c.v9)((e=>e.allClients.allAdmins)),[r,u]=(0,l.useState)({firstName:"",lastName:"",email:"",userRole:"",isLoading:!0,showPopup:!1,adminEmail:"",adminId:"",action:"",roles:a||[],admins:s||[],updateAdminRole:"",updateAdminStatus:""});(0,l.useEffect)((()=>{e((0,d.FW)()),e((0,d.Q3)()),e((0,d.F3)())}),[]),(0,l.useEffect)((()=>{u((e=>({...e,roles:a,admins:s,isLoading:!1})))}),[a,s]);const h=e=>{let a=[];return Object.values(e).length&&Object.values(e).map((e=>{a.push({value:e.name,label:e.name})})),a},g=(e,a)=>{u((s=>({...s,[e]:a})))},x=e=>[{value:e,label:e}],{isLoading:v,firstName:b,lastName:f,email:j,userRole:N,showPopup:C,adminEmail:P,roles:w,admins:S,action:k,adminId:y}=r,R=S.data||[],A={firstName:b,lastName:f,email:j,roleName:N};return!v&&(0,m.jsxs)("div",{className:"container-wrap",children:[(0,m.jsxs)("div",{className:"addressContainer mb",children:[(0,m.jsx)("h4",{children:"Add new back office user"}),(0,m.jsxs)("ul",{className:"adminUsersList",children:[(0,m.jsxs)("li",{children:[(0,m.jsx)("span",{children:"First name"}),(0,m.jsx)("input",{value:b,onChange:e=>g("firstName",e.target.value),className:"react-select-container",type:"text",name:"firstName"})]}),(0,m.jsxs)("li",{children:[(0,m.jsx)("span",{children:"Last name"}),(0,m.jsx)("input",{value:f,onChange:e=>g("lastName",e.target.value),className:"react-select-container",type:"text",name:"lastName"})]}),(0,m.jsxs)("li",{children:[(0,m.jsx)("span",{children:"Email"}),(0,m.jsx)("input",{value:j,onChange:e=>g("email",e.target.value),className:"react-select-container",type:"email",name:"email"})]}),(0,m.jsxs)("li",{children:[(0,m.jsx)("span",{children:"User Role"}),(0,m.jsx)(t.ZP,{value:x(N||"Select role..."),onChange:e=>g("userRole",e.value),options:h(w),className:"react-select-container",classNamePrefix:"react-select",name:"userRole",styles:o.B})]})]}),(0,m.jsx)("div",{className:"profileButton",children:(0,m.jsx)("span",{onClick:()=>{e((0,d.bg)(A)),u((e=>({...e,firstName:"",lastName:"",email:"",userRole:""})))},className:"profileButton-submit",children:"Submit"})})]}),(0,m.jsx)(i.Z,{data:R,defaultPageSize:10,getTableProps:()=>({style:{overflow:"visible"}}),getTbodyProps:()=>({style:{overflow:"visible"}}),columns:p({prepareRoles:h,setDefaultSelectValue:x,roles:w,handlerShowPopup:(e,a)=>{u("resetPass"===a?s=>({...s,showPopup:!0,adminEmail:e,action:a}):s=>({...s,showPopup:!0,adminId:e,action:a}))},dispatch:e}),defaultSorted:[{id:"id",desc:!0}],getTdProps:(e,a,s)=>({style:"Role"===s.id||"Status"===s.id?{overflow:"visible",padding:"0 7px"}:{}})}),C&&(0,m.jsx)(n.Z,{onYes:()=>{e("resetPass"===k?(0,d._S)(P):(0,d.jP)(y))},onClose:e=>{u((e=>({...e,showPopup:!1})))},title:"resetPass"===k?"Reset password?":"Delete admin?",ok:"Yes",cancel:"No",id:P})]})}},7207:(e,a,s)=>{s.d(a,{Z:()=>o});var l=s(2791);s.p;var t=s(3329);const o=e=>{let{onClose:a,onYes:s,id:o,children:n,title:r,ok:i,cancel:c,type:d,onChange:m}=e;return(0,t.jsx)("div",{onClick:e=>a(e),className:"popupOverlay",children:(0,t.jsx)("div",{className:"popupContent",onClick:e=>e.stopPropagation(),children:(0,t.jsxs)("div",{className:"modalPopup",children:[(0,t.jsx)("h2",{children:r}),d&&"reject"===d&&(0,t.jsxs)(l.Fragment,{children:[(0,t.jsx)("label",{htmlFor:"modalPopup-comment",children:"Comment:"}),(0,t.jsx)("textarea",{onFocus:e=>e.stopPropagation(),onKeyPress:e=>{"Enter"===e.key&&s(e)},onChange:e=>m(e),rows:"3",id:"modalPopup-comment",className:"modalPopup-comment"})]}),(0,t.jsxs)("div",{className:"modalPopup-buttons",children:[(0,t.jsx)("span",{onClick:e=>{s(o),a(e)},children:i}),(0,t.jsx)("span",{onClick:e=>a(e),children:c})]}),n]})})})}},4933:(e,a,s)=>{s.d(a,{B:()=>l});const l={option:(e,a)=>{let{isDisabled:s,isFocused:l,isSelected:t}=a;return{...e,backgroundColor:t||l?"var(--no-active-tabs)":"var(--main-bg-color)",borderTop:t?"1px solid var(--border-color)":"none",borderBottom:t?"1px solid var(--border-color)":"none",color:"#FFF",cursor:"pointer"}},placeholder:e=>({...e,color:"var(--text-white-color)"}),singleValue:e=>({...e,color:"var(--text-white-color)"}),input:e=>({...e,color:"var(--text-white-color)",padding:"2px"}),indicatorSeparator:e=>({...e,display:"none"}),dropdownIndicator:e=>({...e,padding:"0",color:"var(--text-white-color)"}),menu:e=>({...e,boxSizing:"border-box",background:"var(--main-bg-color)"}),container:e=>({...e,boxSizing:"border-box",maxHeight:"30px",fontSize:"12px",width:"100%",marginRight:"2px"}),control:e=>({...e,boxSizing:"border-box",height:"30px",display:"flex",minHeight:"0",alignItems:"center",border:"none",borderRadius:"0",background:"var(--main-bg-color)",boxShadow:"none"})}},6795:(e,a,s)=>{s.d(a,{Vh:()=>n,bC:()=>i,po:()=>c});var l=s(2426),t=s.n(l),o=(s(2791),s(3329));const n={days:()=>{let e=[];for(let a=1;a<=31;a++)e.push({label:a,value:a.toString().length>1?a.toString():"0"+a});return e},months:()=>{let e=[],a=new Date(1970,0);for(let s=0;s<12;s++)e.push({label:t()(a.getMilliseconds()).add(s,"month").format("MMMM"),value:s.toString().length>1?(s+1).toString():"0"+(s+1)});return e},years:()=>{let e=[],a=(new Date).getFullYear()-18;for(let s=1920;s<=a;s++)e.push({label:s.toString(),value:s.toString()});return e}};function r(e){return{value:e.id,label:e.name}}const i=e=>e?e.map(r):[],c=e=>{let{filter:a,onChange:s,options:l}=e;return(0,o.jsxs)("select",{onChange:e=>s(e.target.value),style:{width:"100%",height:"20px",padding:0,background:"#252f35",color:"#fff"},value:a?a.value:"all",children:[(0,o.jsx)("option",{value:"",children:"Show All"}),l.filter(((e,a,s)=>s.lastIndexOf(e)==a)).map((function(e){return(0,o.jsx)("option",{value:e.key,children:e.value},e.key)}))]})}}}]);
//# sourceMappingURL=995.e2f211f2.chunk.js.map